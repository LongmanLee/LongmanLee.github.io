# UML类图学习
* 学一点点UML类图，用来表达程序的系统结构
* 学习的资源来自:[1](http://www.cnblogs.com/duanxz/archive/2012/06/13/2547801.html),[2](http://blog.csdn.net/microchenhong/article/details/6239462),[3](http://www.uml.org.cn/oobject/201211231.asp)等等.

## 概述

<dl>
<dt>UML类图</dt>
<dd>描述一个类与类之间的关系，包括依赖（Dependency），关联（Association），聚合（Aggregation），组合（Composition），泛化（Generalization），实现（Realization）等。</dd>
</dl>

* 依赖：对象A变化会影响对象B，反之不会，则表示B依赖与A；
* 泛化：一般指继承继承，即派生类也是一个(is-a)基类；
* 实现：对象A定义一个接口，B实现这个接口，则B与A是实现关系；
* 关联：对象间的结构化关系，一种弱关系，被关联对象可以单独考虑。
* 聚合：关联的一种特例，表示部分与整体(整体 has-a 部分)的关系。
* 组合：聚合的一种特例，一种更强的关联关系。

![](../image/UML0.png)

上图表示B **泛化(Generalization)** A,

## 依赖关系
* 表示方法：虚线，终点为箭头；
* 描述类与类之间的关系；
* 单向，应避免双向依赖关系，一般不存在双向依赖；
* 在C++中体现为 **局部变量**，**方法的参数**，**方法的返回**，**被调用静态方法**，这些方式主要是在类的方法中。 

如:
   
```c++
	class Car;
	class Person
	{
	public:
		void Buy(Car& pcar)
	pravite:
		Car pcar;
	}
```

Car(车)依赖Person(人)。

### 依赖关系有4类
	- 使用(Usage)依赖
		1. 使用(use)：使用A类型需要已存在B类型；
		2. 调用(call)：A类型调用B类型的方法；
		3. 参数(parameter):函数类型F的参数是B类型;
		4. 发送(send)：信号发送者与接受者之间；
		5. 实例化(instantiate)：函数实例化B类型.
	- 抽象(Abstraction)依赖
		1. 跟踪(trace)
		2. 精化(refine)
		3. 派生(derive)
	- 授权（Permission）依赖
		1. 访问(access)
		2. 导入(import)
		3. 友元(friend)
	- 绑定(Binding)

## 关联关系

* 表示方法：实线,终点箭头可选；
* 描述对象与对象之间的关系；
* 可以单双向，还可以自身关联，双向有俩或者没有箭头，单向只有一个箭头；
* C++中，关联关系主要通过 **成员变量**实现。
* 多重性：
	- 1：一个
	- *：零个或多个
	- 1..*：一个或多个
	- 0..1：零个或一个

如

```c++
    class Tudi;
    class Shifu
    {
    pravite:
    std::list<shifu> mAList;
    }
```
Tudi(徒弟)关联Shifu(师父)。

## 聚合关系
* 表示方法：起点为空心菱形，实线，终点为箭头；
* 一种关联关系特例，强的关联关系；
* 描述整与局部的关系；
* 也是通过 **成员变量**来实现，但并不是处于同一个 **逻辑层次**上。
* 需要考虑对象的逻辑层次。

如

```c++
    class Luntai;
    class Yingqin;
    Class Car
    {
    pravite:
    std::vector<Luntai> mLuntai;
    Yingqin mY;
    }
```

车含有轮胎和引擎，具有严格概念层次;

## 组合(或译为复合，合成等)关系
* 表示方法：起点为实心菱形，实线，终点箭头可选;
* 关联关系特例，强于聚合；
* 要求代表整体的对象需要负责代表部分对象的 **生命周期**。

如
```c++
    class sizi;
    class person
    {
    	pravite:
    	sizi msz;
    }
```

人拥有四肢。

## 泛化关系
* 表示方法：实线，空心三角箭头；
* 主要表示 **继承关系**，包括类与类，接口与接口之间。

## 实现关系
* 表示方法：虚线，空心三角箭头；

## 一些区分方法
### 聚合与组合
* 都属于关联，暗含整体与部分的逻辑层次；
* 聚合较弱，组合较强。聚合关系中，整件不会拥有部件的生命周期，所以整件删除时，部件不会被删除。再者，多个整件可以共享同一个部件。 组合关系中，整件拥有部件的生命周期，所以整件删除时，部件一定会跟着删除。而且，多个整件不可以同时间共享同一个部件。
* 聚合关系是“has-a”关系，组合关系是“contains-a”关系。
* 往往会将所有的包含关系画成“弱”包含，后面发现某些关系可以表示为“强”包含是，才转为实心菱形。
### 关联与聚合
* 代码层面一致的，只能逻辑区分；
### 关联与依赖
* 关联是两个类、或者类与接口之间语义级别的一种强依赖关系.

### 泛化和实现
* 实现表示类对接口的实现关系。
* 泛化表示类与类之间的继承关系、接口与接口之间的继承关系。

### 总体比较
* 这几种关系都是语义级别的，所以从代码层面并不能完全区分各种关系；但总的来说，后几种关系所表现的强弱程度依次为：

	 **泛化(继承)>组合>聚合>关联>依赖**

* * *